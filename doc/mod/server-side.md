## 3-1 定义模型方法

### 1.1 图书状态和状态迁移

状态：未上架、可借阅、已借出、遗失

状态迁移：

* 未上架 -> 可借阅
* 可借阅 -> 已借出
* 已借出 -> 可借阅
* 可借阅 -> 遗失
* 已借出 -> 遗失
* 遗失 -> 可借阅

### 1.2 定义模型方法，响应按钮动作

* make_available()
* make_borrowed()
* make_lost()

### 1.3 定义表单按钮

可借，借出，遗失

### 1.4 更新应用

确认按钮动作是否生效


## 3-2 在前端显示异常信息

### 2.1 错误的状态迁移

状态迁移：（正确）

* 未上架 -> 可借阅
* 可借阅 -> 已借出
* 已借出 -> 可借阅
* 可借阅 -> 遗失
* 已借出 -> 遗失
* 遗失 -> 可借阅

状态迁移：（错误）
* 遗失 -> 已借出

### 2.2 在模型方法种定义异常信息：

LibraryBook#change_state

【遗失】状态的数据不可更新为【已借出】

### 2.3 在前端显示异常信息

`raise UserError('状态转换不合法！')`

### 2.4 重启应用

重启应用（无需更新应用），直接测试查看前端错误提示信息